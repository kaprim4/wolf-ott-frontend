<mat-card class="cardWithShadow theme-card">
    <ng-container *ngIf="isLoading">
        <mat-progress-bar mode="query"></mat-progress-bar>
    </ng-container>
    <mat-card-header>
        <mat-card-title class="m-b-0" style="color:white;">
            Quick Xtream
        </mat-card-title>
    </mat-card-header>
    <mat-card-content class="b-t-1">
        <mat-stepper #stepper>
            <mat-step [stepControl]="packageForm">
                <form class="mt-3" [formGroup]="packageForm"> <!-- Use Bootstrap's margin-top -->
                    <ng-template matStepLabel>Package</ng-template>
                    <div>
                        <mat-form-field appearance="outline" class="w-100 m-4">
                            <mat-label class="mat-subtitle-2 fw-bold">Package</mat-label>
                            <mat-select formControlName="package" (selectionChange)="onSelectPackage($event)"
                                        (openedChange)="onPackagesDropdownOpened($event)" required>
                                <mat-select-trigger>
                                    {{ getSelectedPackageName() }}
                                </mat-select-trigger>
                                <mat-option>
                                    <ngx-mat-select-search
                                        [formControl]="packageSearchCtrl"
                                        placeholderLabel="Search"
                                        noEntriesFoundLabel="No options found">
                                    </ngx-mat-select-search>
                                </mat-option>
                                <mat-option *ngFor="let pkg of filteredPackages" [value]="pkg.id"
                                            (click)="$event.stopPropagation()">
                                    {{ pkg.packageName }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                        <div class="d-flex align-items-center justify-content-between">
                            <button mat-flat-button color="warn" matStepperPrevious>Back</button>
                            <button mat-flat-button color="primary" matStepperNext (click)="createLine()">Create Line</button>
                        </div>
                    </div>
                </form>
            </mat-step>
            <mat-step>
                <ng-template matStepLabel>Finish</ng-template>
                <div class="input-group p-10">
                    <mat-form-field appearance="outline" class="w-100 m-t-2">
                        <mat-label>Host</mat-label>
                        <input matInput type="text" [value]="server" disabled>
                    </mat-form-field>
                </div>
                <div class="input-group p-10">
                    <mat-form-field appearance="outline" class="w-100 m-t-2">
                        <mat-label>Username</mat-label>
                        <input matInput type="text" [value]="username" disabled>
                    </mat-form-field>
                </div>
                <div class="input-group p-10">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>Password</mat-label>
                        <input matInput type="text" [value]="password" disabled>
                    </mat-form-field>
                </div>
            </mat-step>
        </mat-stepper>
    </mat-card-content>
</mat-card>
